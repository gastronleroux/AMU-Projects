<html>
<head>
<title>Własność Darboux - s444449</title>
<meta charset='UTF-8'>
<style>
.przycisk{
	width:30%; height:45px; position:relative; float:left; background-color:#cfc7c9; text-align:center; 
	border-radius: 5px 5px 15px 15px; opacity:1; font-size:30px; box-shadow: 2px 2px; margin-left:35%;
}
.przycisk:hover{ opacity:0.8; }
#tab{ opacity:0; }
#up{ opacity:0; margin-top:-20px; transition: opacity 2s, margin 2s; }
input::-webkit-input-placeholder {
     color: white;
     opacity: 0.4;
	 font-family: 'Exo', sans-serif;
}
</style>
<link href='http://fonts.googleapis.com/css?family=Amatic+SC&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Exo" rel="stylesheet">
</head>
<body style="width: 70%; margin: 0 auto; background-color:#f0eeef; color: #958386; text-decoration: none; font-family: 'Amatic SC', sans-serif; cursor:default;">
<div id="up">
<p style="margin-top:40px; text-align:center; font-size:40px;margin-bottom:0px">Wprowadź funkcję</p>
<p style="margin-top:2px; text-align:center; font-size:25px; margin-bottom:5px">Obsługiwane funkcje: pow(baza,potęga), sin(x), cos(x), log(x), abs(x)</p>
<input id="formula" type="text" placeholder='np. 5*pow(x,2)+8*x-9' style="letter-spacing: 2px; width:70%; margin-left:15%; padding: 5px; text-align:center; background-color:#c4babc; color: #f3f1f2; font-size:20px; outline: none; border-radius: 30px 30px 5px 5px">
<br>
<p style="text-align:center; font-size:40px; margin-bottom:5px;margin-top:7px;">Wprowadź przedział</p>
<input id="p_od" step="0.001" type="number" placeholder="od" style="letter-spacing: 2px; width:13%; margin-left:36.5%; padding: 5px; text-align:center; background-color:#c4babc; color: #f3f1f2; font-size:20px; outline: none; border-radius: 30px 10px 5px 5px">
<input id="p_do" step="0.001" type="number" placeholder="do" style="letter-spacing: 2px; width:13%; margin-left:1%; padding: 5px; text-align:center; background-color:#c4babc; color: #f3f1f2; font-size:20px; outline: none; border-radius: 10px 30px 5px 5px">
<br>
<p style="text-align:center; font-size:40px; margin-bottom:5px;margin-top:7px;">Wprowadź dokładność</p>
<input id="epsilon" step="0.0001" min=0 type="number" placeholder="epsilon" style="letter-spacing: 2px; width:16%; margin-left:42%; padding: 5px; text-align:center; background-color:#c4babc; color: #f3f1f2; font-size:20px; outline: none; border-radius: 30px 30px 5px 5px">

<span id="check" style='margin-top:10px;' class="przycisk">✓</span>
</div>
<div id="tab" style="font-family: 'Exo', sans-serif; position:relative; float:left; width:100%; margin-top:20px; "></div>
</body>
<script>
setTimeout(function(){ document.getElementById("up").style.opacity=1; document.getElementById("up").style.marginTop=0; }, 10);
document.ondragstart = function() { return false }
document.onselectstart = function() { return false }
formula = document.getElementById("formula");

document.getElementById("check").onclick = function(){ if(formula.value.length>0&&p_od.value.length>0&&p_do.value.length>0&&epsilon.value.length>0) check(formula.value, p_od.value, p_do.value, parseFloat(epsilon.value)) }

function check(funkcja, p_od, p_do, eps){
	tab.style.transition=''; tab.style.opacity=0;
	fun = funkcja.replace(/pow/g,'Math.pow');
	fun = fun.replace(/abs/g,'Math.abs');
	fun = fun.replace(/log/g,'Math.log');
	fun = fun.replace(/cos/g,'Math.cos');
	fun = fun.replace(/sin/g,'Math.sin');
	try{
		eval(fun.replace(/x/g,parseFloat(p_od))); eval(fun.replace(/x/g,parseFloat(p_do)));
		
		przedfunk = [parseFloat(p_od), parseFloat(p_do)];
		pofunk = [parseFloat(eval(fun.replace(/x/g,p_od))), parseFloat(eval(fun.replace(/x/g,p_do)))];
		
		if(pofunk[0]*pofunk[1]>=0){
			tab.innerHTML="<p style='cursor:default;text-align:center; margin:0; margin-bottom:10px; font-size:25px'>Przedział uniemożliwa znalezienie miejsca zerowego</p>";
		}else{
			while(Math.abs(przedfunk[0]-przedfunk[1])/2>eps){
				nowy_przedzial = parseFloat((przedfunk[0]+przedfunk[1])/2);
				if(parseFloat(eval(fun.replace(/x/g,nowy_przedzial)))>=0){
					if(pofunk[0]>=0){
						przedfunk[0] = nowy_przedzial;
						pofunk[0] = parseFloat(eval(fun.replace(/x/g,nowy_przedzial)));
					}else{
						przedfunk[1] = nowy_przedzial;
						pofunk[1] = parseFloat(eval(fun.replace(/x/g,nowy_przedzial)));
					}
				}else{
					if(pofunk[0]<0){
						przedfunk[0] = nowy_przedzial;
						pofunk[0] = parseFloat(eval(fun.replace(/x/g,nowy_przedzial)));
					}else{
						przedfunk[1] = nowy_przedzial;
						pofunk[1] = parseFloat(eval(fun.replace(/x/g,nowy_przedzial)));
					}
				}
			}
			delta = parseFloat((przedfunk[0]+przedfunk[1])/2);
			tab.innerHTML="<p style='cursor:default;text-align:center; margin:0; margin-bottom:10px; font-size:25px'>Miejsce zerowe funkcji w przybliżeniu wynosi d = "+delta+" </p>";		
		}
	}catch{
		tab.innerHTML="<p style='cursor:default;text-align:center; margin:0; margin-bottom:10px; font-size:25px'>Funkcja jest niepoprawna</p>";
	}
	
	setTimeout(function(){ tab.style.transition="opacity 1s"; tab.style.opacity=1; }, 20);
}
</script>
</html>